<?php
namespace WP\Views; use WP\Traits\Helpers; class Page { use Helpers; public static $default; public static $static; public function __construct() { self::set('caller', get_called_class()); $sp5aa9ad = array('nf_logo' => 'getHeaderLogo', 'nf_head' => 'getHeader', 'nf_tabs' => 'getTabs', 'nf_foot' => 'getFooter'); add_action('admin_menu', array($this, 'makeView')); array_walk($sp5aa9ad, function ($sp1eeb4f, $sp6b4425) { if (method_exists(self::get('caller'), $sp1eeb4f)) { add_action($sp6b4425, array(self::get('caller'), $sp1eeb4f)); } }); } public static function getTpl() { $spb6f5ae = self::get('namespace') . '\\' . ucfirst(camel_case(self::get('page'))); class_exists($spb6f5ae) ? add_action('nf_body', array($spb6f5ae, 'getInstance')) : null; include_once self::get('templatePath') . '/main.tpl'; if (!class_exists($spb6f5ae)) { dd('class ' . $spb6f5ae . ' doesn\'t exist.'); } } public static function makeView() { self::bootstrap(); $sp97a536 = self::get('caller'); array_walk($sp97a536::$plugin, function ($sp1eeb4f, $sp6b4425) use($sp97a536) { if (!self::isMenuItemExists($sp6b4425)) { add_menu_page(ucwords($sp6b4425), $sp6b4425, 'manage_options', $sp1eeb4f['uri'], array($sp97a536, 'getTpl'), self::get('assetsUrl') . $sp1eeb4f['menu_logo']); } array_walk($sp1eeb4f['pages'], function ($sp5f602c, $speb3f73) use($sp1eeb4f, $sp97a536) { add_submenu_page($sp1eeb4f['uri'], ucwords($speb3f73), ucwords($speb3f73), 'manage_options', $sp5f602c, array($sp97a536, 'getTpl')); }); }); } public static function isMenuItemExists($sp15f102) { global $menu; $spf1b181 = false; array_walk($menu, function ($sp1eeb4f) use($sp15f102, &$spf1b181) { if (preg_match('/^' . trim($sp15f102) . '$/i', $sp1eeb4f[0])) { $spf1b181 = true; } }); return $spf1b181; } protected static function makeTab($sp8ac08d, $speb3f73, $sp610aa0 = null) { $spadefa1 = $speb3f73 == self::getCurrentPage() ? 'nav-tab-active' : ''; printf('<a class=\'nav-tab %s\' href=\'?page=%s\' title=\'%s\'>%s</a>', $spadefa1, is_null($speb3f73) ? self::getCurrentPage() : $speb3f73, ucfirst($sp610aa0), ucwords($sp8ac08d)); } public static function getTabs() { $sp97a536 = self::get('caller'); array_walk(array_shift($sp97a536::$plugin)['pages'], function ($sp5f602c, $speb3f73) { self::makeTab($speb3f73, $sp5f602c); }); } }