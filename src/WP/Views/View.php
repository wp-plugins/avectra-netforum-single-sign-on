<?php
namespace WP\Views; use Netforum\Traits\SingletonTrait; abstract class View extends Form { use SingletonTrait; protected $_691489147657; protected $_52c4ce77469c = array('abstract' => array('desc' => 'this is the abstract section.', 'fields' => array('field1' => array('title' => 'abstract field 1', 'desc' => 'you should extend this abstract class and not use it directly.', 'validate' => array('[a-zA-Z0-9_]{5,}', 'must be minimum 5 characters, format (a-z 0-9 _-)'), 'required' => true, 'callback' => null, 'default' => 'some value', 'filter' => 'trim')))); public function __construct() { $this->_ae3d9eac21dc = Page::getCurrentPage(); $this->_691489147657 = snake_case(end(explode('\\', get_called_class()))); if (isset($_POST[$this->_ae3d9eac21dc]) && sizeof($_POST[$this->_ae3d9eac21dc]) > 0) { !$this->validate() ? $this->flash(true) : $this->store() && $this->flash(); } $this->init(); $this->render(); } protected function init() { register_setting($this->_ae3d9eac21dc, $this->_691489147657, array($this, 'sanitize')); if (sizeof($this->_52c4ce77469c) <= 0) { return false; } array_walk($this->_52c4ce77469c, function ($spd62c57, $spf1c943) { $this->makeSection($spf1c943, $spd62c57['desc']); if (isset($spd62c57['js'])) { Input::handleCallback($spd62c57['js']); } array_walk($spd62c57['fields'], function ($sp12d00f, $spc8a416) use($spf1c943) { $sp12d00f += array('key' => $spc8a416, 'section' => $spf1c943); $this->makeField($spc8a416, $sp12d00f); }); }); } protected function render() { if (sizeof($this->_52c4ce77469c) > 0) { settings_fields($this->_691489147657); do_settings_sections($this->_ae3d9eac21dc); submit_button(); } } protected function makeSection($sp086745, $sp560f2a = null, $sp758fc1 = null) { if (is_null($sp758fc1)) { $sp758fc1 = function () use($sp560f2a) { print $sp560f2a; }; } return add_settings_section($this->toSlug($sp086745), ucwords($sp086745), $sp758fc1, $this->_ae3d9eac21dc); } protected function makeField($sp139d9c, array $spd62c57) { if (is_null($spd62c57['callback'])) { $spd62c57['callback'] = 'textfield'; } if (!is_array($spd62c57['callback'])) { $spd62c57['callback'] = array(__NAMESPACE__ . '\\Input', $spd62c57['callback']); } $sp735857 = $this->toSlug($spd62c57['section']); if (sizeof($spd62c57['args']) <= 0) { $spd62c57['args'] = array('group' => $this->_691489147657, 'section' => $sp735857, 'id' => $sp139d9c, 'desc' => $spd62c57['desc'], 'default' => $spd62c57['default'], 'filter' => $spd62c57['filter'], 'js' => $spd62c57['js']); } return add_settings_field($sp139d9c, $spd62c57['title'], $spd62c57['callback'], $this->_ae3d9eac21dc, $sp735857, $spd62c57['args']); } protected function toSlug($spd62c57, $spfb1b65 = '_') { return preg_replace('/[^\\w]/', $spfb1b65, strtolower($spd62c57)); } }