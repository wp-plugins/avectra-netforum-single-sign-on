<?php
namespace NetAuth; class RemoveAdminBar { private $menuItems = array('Dashboard'); public function __construct() { add_filter('after_setup_theme', array($this, 'removeAdminBar')); add_action('admin_menu', array($this, 'removeAdminMenuItems')); } private function spbc3b6f() { return !current_user_can('manage_options'); } public function removeAdminBar() { if (!$this->spbc3b6f()) { return false; } show_admin_bar(false); add_filter('show_admin_bar', '__return_false'); add_filter('wp_admin_bar_class', '__return_false'); } public function removeAdminMenuItems() { global $menu; if (!$this->spbc3b6f()) { return false; } $sp4c3550 = array_filter($this->menuItems, '__'); end($menu); while (prev($menu)) { $sp15f102 = explode(' ', $menu[key($menu)][0]); if (in_array($sp15f102[0] != null ? $sp15f102[0] : '', $sp4c3550)) { unset($menu[key($menu)]); } } if (preg_match('/src\\s*=\\s*(\'|")(.*?)("|\')/', get_avatar(get_current_user_id(), 20), $spfc6540)) { $menu[] = array('Log Out', 'read', wp_logout_url(), 'Logout', 'menu-top', 'logout', $spfc6540[2]); } } }